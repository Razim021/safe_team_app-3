<div class="card shadow">
  <div class="card-header bg-success text-white">
    <h4 class="my-2">Request a Ride</h4>
  </div>
  
  <div class="card-body">
    <% if @active_ride %>
      <div class="alert alert-info">
        <p>You already have an active ride.</p>
        <%= link_to "View Current Ride", ride_request_path(@active_ride), class: "btn btn-primary" %>
      </div>
    <% else %>
      <%= form_with model: @new_ride, url: ride_requests_path, local: true do |f| %>
        <div class="row mb-4">
          <div class="col-md-6">
            <%= f.label :pickup_location_id, "Pickup Location", class: "form-label" %>
            <%= f.collection_select :pickup_location_id, @locations, :id, :name, 
                                   { prompt: "Select pickup location" }, 
                                   { class: "form-select", required: true } %>
          </div>
          <div class="col-md-6">
            <%= f.label :dropoff_location_id, "Drop-off Location", class: "form-label" %>
            <%= f.collection_select :dropoff_location_id, @locations, :id, :name, 
                                   { prompt: "Select drop-off location" }, 
                                   { class: "form-select", required: true } %>
          </div>
        </div>
        
        <div class="row mb-4">
          <div class="col-md-6">
            <%= f.label :passengers_count, "Number of Passengers", class: "form-label" %>
            <%= f.select :passengers_count, options_for_select((1..5).to_a), 
                        { selected: 1 }, { class: "form-select" } %>
          </div>
        </div>
        
        <div class="mb-4">
          <%= f.label :special_instructions, "Special Instructions (Optional)", class: "form-label" %>
          <%= f.text_area :special_instructions, class: "form-control", rows: 3 %>
        </div>
        
        <div class="d-grid">
          <%= f.submit "Request Ride", class: "btn btn-success btn-lg" %>
        </div>
      <% end %>
    <% end %>
  </div>
</div>
<!-- USF Campus Map -->
<div class="card mt-4">
  <div class="card-header bg-light">
    <h5 class="my-2">USF Campus Map</h5>
  </div>
  <div class="card-body p-0">
    <div class="ratio ratio-16x9">
      <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3522.471578627691!2d-82.41490252422829!3d28.06001511527542!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x88c2c78760f751a1%3A0xd5b7d4845513cfc1!2sUniversity%20of%20South%20Florida!5e0!3m2!1sen!2sus!4v1691087527659!5m2!1sen!2sus" 
              style="border:0;" allowfullscreen="" loading="lazy" 
              referrerpolicy="no-referrer-when-downgrade"></iframe>
    </div>
  </div>
</div>